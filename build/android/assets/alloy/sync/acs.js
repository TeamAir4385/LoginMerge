function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function guid(){return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}function InitAdapter(e){Cloud=require("ti.cloud"),Cloud.debug=!0,e.Cloud=Cloud}function Sync(e,t,i){var o=t.config.adapter.collection_name;"users"===o&&processACSPhotos(t,e,i)}function processACSUsers(e,t,i){switch(t){case"update":var o=e.toJSON();Cloud.Users.update(o,function(t){t.success?(e.meta=t.meta,i.success&&i.success(t.users[0]),e.trigger("fetch")):(Ti.API.error("Cloud.Users.update "+t.message),i.error&&i.error(t.error&&t.message||t))});break;case"read":i.data=i.data||{},e.id&&(i.data.user_id=e.id);var r=e.id?Cloud.Users.show:Cloud.Users.query;r(i.data||{},function(t){return t.success?(e.meta=t.meta,i.success(1===t.users.length?t.users[0]:t.users),void e.trigger("fetch")):(Ti.API.error("Cloud.Users.query "+t.message),void(i.error&&i.error(t.error&&t.message||t)))})}}var _=require("alloy/underscore")._;module.exports.sync=Sync,module.exports.beforeModelCreate=function(e){return e=e||{},e.data={},InitAdapter(e),e},module.exports.afterModelCreate=function(e){return e=e||{},e.prototype.config.Model=e,e};